<div class="banner">
  <div class="banner-content">
    <h1>Discover new places to work<br>amongst thousands of homes</h1>
    <p><span id="banner-typed-text"></span></p>
    <div class="row row-condensend space-4" style="justify-content: center;">
       <%= form_tag flats_path, method: :get do %>
       <div class="col-sm-7 search">
         <%= text_field_tag :query, params[:query], class: "form-control ", placeholder: "Location"%>
       </div>
       <div class="text-left col-sm-5">
         <%= submit_tag("Search", :class => "btn btn-success") %>
       </div>
      <% end %>
    </div>
  </div>
</div>

<div class="main-container">
    <h1 style="font-size: 50px;">All the flats</h1>
  <div class="card-container">

    <% @flats.each do |flat| %>
    <% if flat.photo.blank? %>

        <%= link_to flat_path(flat), :class => "link" do %>
          <div class="card" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 50%, rgba(0, 0, 0, 0.75) 80%), url('https://picsum.photos/300/300/?random');">
            <div class="title-content"><% flat.name %>
              <h3 style="color: rgb(253, 251, 249);"><%= flat.name %></h3>
            </div>
          </div>
        <% end %>

       <% else %>

        <%= link_to flat_path(flat), :class => "link" do %>
          <div class="card" style="background-image: linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.50)), url('<%= cl_image_path flat.photo %>');">
            <div class="title-content">
              <h3><%= flat.name %></h3>
            </div>
          </div>
        <% end %>

      <% end %>
    <% end %>

<div
  id="map"
  style="width: 80%;
  height: 600px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>

  </div>
</div>
